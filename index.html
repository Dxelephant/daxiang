<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="static/css/base.css">
    <link rel="stylesheet" href="static/css/font/css/font-awesome.min.css">
    <link rel="stylesheet" href="static/css/swiper.css">
    <link rel="stylesheet" href="static/css/index.css">
</head>
<body>
   
    <div class="floor">
        <div class="colorBar"></div>
        <!--头部-->
        <div class="header w clearfix">
            <div class="logoInfo">
                <div class="logo fl">
                    <a href="javascript:;"><img src="static/images/logo.png" alt="大象医生"></a>
                    <span class="line"></span>
                </div>
                <div class="info fl">
                    <span class="icon-phone"></span>
                    <h2>咨询热线 400 600 0990</h2>
                    <p>让医疗触手可及 | Make healthcare closer</p>
                </div>
            </div>
            <div class="login"></div>
        </div>
        <!--导航栏-->
        <div class="navBar w">
            <ul>
                <li><a href="javascript:;">首页</a></li>
                <li><a href="javascript:;">远程医疗</a></li>
                <li><a href="javascript:;">影像阅片</a></li>
                <li><a href="javascript:;">大数据中心</a></li>
                <li><a href="javascript:;">关于我们</a></li>
                <li><a href="javascript:;">新闻资讯</a></li>
            </ul>
        </div>
    </div>
         
    <div class="floor w banner swiper-container">
        <div class="swiper-wrapper">
                

        </div>
        <span class="arrow-left noselect" ><i class="iconfont">&#xe601;</i></span>
        <span class="arrow-right noselect" ><i class="iconfont">&#xe612;</i></span>
    </div>
    
    <div class="floor longRange w">
        <img src="static/images/liucheng.jpg" alt="">
        <span class="liaojie btn">了解详情</span>
        <a class="yuyue btn">立即预约</a>
    </div>
    <div class="floor w process">
        <div class="top">
            <div class="part1">
                <img class="img1" src="static/images/index1.png" alt="">
            </div>
            <div class="part2">
                <img class="img2" src="static/images/index2.png" alt="">
                <p>大象医生领先的医疗平台<br>让专家先看到患者病历资料的同时,<br>也看到了影像,<br>从而做出更准确的判断...</p>
            </div>
        </div>
        <div class="part3">
            <div>
                <i class="iconfont">&#xe6c1;</i>
                <span></span>
                <p>的话斯法克斯的后果肯定风华高科舒服的话概括是东风街道开个会收到付款后更是疯狂饭店管理是否打开狗方顺利打开还给</p>
            </div>
            <div>
                <i class="iconfont">&#xe6c1;</i>
                <span></span>
                <p>的话斯法克斯的后果肯定风华高科舒服的话概括是东风街道开个会收到付款后更是疯狂饭店管理是否打开狗方顺利打开还给</p>
            </div>
            <div>
                <i class="iconfont">&#xe6c1;</i>
                <span></span>
                <p>的话斯法克斯的后果肯定风华高科舒服的话概括是东风街道开个会收到付款后更是疯狂饭店管理是否打开狗方顺利打开还给</p>
            </div>
            <div>
                <i class="iconfont">&#xe6c1;</i>
                <span></span>
                <p>的话斯法克斯的后果肯定风华高科舒服的话概括是东风街道开个会收到付款后更是疯狂饭店管理是否打开狗方顺利打开还给</p>
            </div>
        </div>
        <a href="*">了解详情</a>
    </div> 
    <!--底部-->
    <div class="floor footer">
        <div class="footer-link clearfix">
                <a href="javascript:;">关于我们</a>
                <a href="javascript:;">加入我们</a>
                <a href="javascript:;"><span class="icon-home" style="font-size: 18px;"></span>&nbsp; 上海市徐汇区小木桥路251号天亿大厦1401</a>
                <a href="javascript:;"><span class="icon-envelope" style="font-size: 18px;"></span>&nbsp; drelephant@dr-elefant.com.cn</a>       
        </div>
        <p class="copyright">COPYRIGHT2015 大象医生 ALL RIGHTS RESERVDE 2011-2015</p>
    </div>
</body>
<script src="static/js/plug/jquery-1.11.1.js"></script>
<script src="static/js/plug/swiper.js"></script>
<script src="static/js/plug/echo.js"></script>
<script>
        function template(config){
            if(!config.data && !$.isArray(config.data)) return;
            var defaultTemplate = {
                parentElement : 'body',
                element : '<span>{value}</span>',
            };

            var config = $.extend(defaultTemplate, config),
                i = 0,
                length = config.data.length,
                str = '';

            for(;i < length; i++){
                str += config.element.replace(/{value}/g, config.data[i])
            }

            $(config.parentElement).append(str);
        }

         template({
             parentElement : '.banner .swiper-wrapper',
             data : ['static/images/logo.png','static/images/logo.png','static/images/logo.png','static/images/logo.png'],
             element : '<img class="swiper-slide" src={value} />'
         })

        function floor(){
            this.floors = $('.floor'); 
            this.flag = true;      
        }

        
        floor.prototype.getPosition =  function (){
            
            var positions = [];

            $.each(this.floors,function(i,e){
                positions.push(Math.ceil($(e).offset().top))
            })

            this.positions = positions;
        }

        floor.prototype.move = function(){
            var self = this;
            $('html,body').animate({scrollTop:self.positions[self.next]}, 200, function(){
                self.flag = true;
            });
        }

        floor.prototype.nowPosition = function (height){
            var scrollY = window.scrollY,
                self = this,
                isBottom = $(document).scrollTop() >= height;
                console.log(this.positions)
            if(scrollY > 0){
                this.positions.forEach(function (i, index){
                    if(scrollY >= i){
                        if (isBottom) {  
                            self.now = index + 1;
                        } else{
                        console.log(i)
                            self.now = index;
                        } 
                    }
                });
            }else{
                self.now = 0;
            }
        }

        floor.prototype.event = function(){
            this.getPosition();
            var value = 0,
                self = this,
                length = self.floors.length - 1,
                height = $(document).height()-$(window).height(),
                scrollFunc = function(e){
                    if(self.flag){
                        self.flag = false;
                        e = e || window.event; 
                        if(e.wheelDelta){//IE/Opera/Chrome 
                            value = e.wheelDelta; 
                        }else if(e.detail){//Firefox 
                            value = -e.detail; 
                        }
                        self.nowPosition(height);
                        if(value > 0){
                            self.next = self.now <= 0 ? 0 : self.now - 1;
                        }else if(value < 0){
                            self.next = self.now >= length ? length : self.now + 1;
                        } 
                          console.log(self.now)
                        self.move();         
                    }
                 
                        e.stopPropagation();
                        e.preventDefault(); 
                    
                } 
            /*注册事件*/ 
            if(document.addEventListener){ 
                document.addEventListener('DOMMouseScroll',scrollFunc,false); 
            }//W3C 
            window.onmousewheel=document.onmousewheel=scrollFunc;//IE/Opera/Chrome 

        }
  
        var a= new floor();
        a.event()

        var mySwiper = new Swiper('.swiper-container',{  
           
            speed:500,  //滚动页面的速度
            autoplay:2000,
            autoplayDisableOnInteraction : true,
            loop : true,
            simulateTouch:false, //禁止触屏事件
            mode: 'horizontal',  // 滑动方向上下垂直  horizontal
           
        })

        $(document).on('click','.arrow-left',function(){
            mySwiper.slideNext();
            return false;
        })

        $(document).on('click','.arrow-right',function(){
            mySwiper.slidePrev();
            return false;
        })

        $(document).on('mouseover','.swiper-container',function(){
            mySwiper.stopAutoplay()
        })

        $(document).on('mouseleave','.swiper-container',function(){
            mySwiper.startAutoplay()
        })
</script>
</html>